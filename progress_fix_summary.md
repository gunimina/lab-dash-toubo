# 진행률 실시간 업데이트 문제 해결

## 문제
- Node.js 크롤러가 webhook에서 `progress` 필드를 전송하지 않아 진행률이 항상 0%로 표시됨
- 메시지에는 "자식상품 수집중 (12000)" 같은 제품 번호가 포함되어 있으나 활용되지 않음

## 해결책
`extract_progress_from_params` 메서드를 개선하여 메시지에서 진행률을 추출:

1. **Step 1 내부 단계별 진행률 계산**
   - 카테고리 (0-25%): 약 100개 기준
   - 부모상품 (25-50%): 약 2000개 기준  
   - 자식상품 (50-75%): 약 18000개 기준
   - 상세정보 (75-100%): 약 18000개 기준

2. **메시지 패턴 매칭으로 단계 감지**
   - "카테고리", "부모", "자식", "iframe/스펙" 등의 키워드로 현재 단계 파악
   - 괄호 안의 숫자 `(12000)`를 추출하여 진행률 계산

3. **실제 결과**
   - 진행률이 67%로 정상 표시됨
   - 내부 단계가 "내부3단계: 자식상품 (진행중)"으로 올바르게 표시됨

## 남은 작업
Node.js 크롤러가 webhook에 `progress` 필드를 포함하도록 수정하면 더 정확한 진행률 표시 가능

## 코드 변경 위치
- `/app/controllers/admin/initial_crawling_controller.rb`의 `extract_progress_from_params` 메서드